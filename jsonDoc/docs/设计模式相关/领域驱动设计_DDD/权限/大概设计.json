{"fileName":"大概设计.md","dirList":["docs","设计模式相关","领域驱动设计_DDD","权限"],"name":"大概设计","createTime":1679414070485.6287,"modifyTime":1679414071422.3887,"data":"\n\n# 设计\n\n一个模块包含若干个页面，而一个页面包括若干个权限集，\n\n## 模块\n\n模块是功能整合体。\n\n例如一个电商后台，可能需要`权限管理，客服系统，店铺管理，订单管理，用户管理，风险管理，举报管理，单据管理，推荐管理，活动管理，日志管理，开发工具，模块管理`等模块。\n\n大致可分为`运营模块，业务支撑模块，工具模块`\n\n- 运营模块：包括`店铺管理，订单管理，用户管理，活动管理`\n- 业务支撑模块：包括`举报管理，处理单据管理，推荐管理，申诉管理，风险管理，客服系统`\n- 内部模块：包括`日志管理，开发工具，模块管理`\n\n当运营人员过多的时候，我们并不希望每个运营同学都具有所有运营系统的使用能力。\n\n### 例子\n\n例如店铺管理模块，将拥有以下页面\n1. 店铺申请审核页\n2. 店铺管理\n<!-- 3. 店铺处罚 — 处罚店铺，封禁商品，对店铺信息处罚。（侵权，色情，诈骗等）这里应该集成到店铺管理 -->\n3. 商品管理\n4. 商品评价管理\n5. 店铺能力控制 —— 删评，上架，商品上限等能力\n6. 数据分析页（多个页面）\n7. C端展示页审核 （避免出现在商品介绍页，商家用白色字体展示违规文本的情况）\n8. 店铺信息修改审核页 （改名，修改联系人，地址等）\n\n## 权限集\n\n权限集是指实现某个能力所需要的接口集合。例如，店铺信息获取权限集包括商品获取接口，商品评价获取接口，订单获取接口，商店信息获取接口。\n\n> 模块和权限集是两个无从属关系的实体。\n\n### 结合上述的例子\n\n假设负责店铺模块的运营同学有n个。分为店铺审核小组，店铺运营小组和店铺客服小组。\n\n其中店铺审核小组，负责店铺申请和C端展示审核和商品上架审核\n\n具有的权限集有：\n1. 店铺信息获取权限集 （包括商品，商品评价，数据分析，C端展示页等店铺信息）\n2. 审核信息获取权限集 （店铺申请，商品上架等审核信息）\n3. 审核处理能力权限集 （店铺信息修改，店铺申请和商品上架的驳回，通过和搁置等能力）\n4. 店铺隐私信息获取权限集 （手机号，身份证，工商证明等隐私信息，高危权限集）\n5. 店铺审核相关单据管理权限集 （查看，驳回店铺审核相关单据等能力）\n\n店铺运营小组，负责店铺商品上下架，评价控制，店铺能力控制等。\n\n具有的权限集有：\n1. 店铺信息获取权限集\n2. 店铺能力处罚权限集（对商品，店铺处罚等能力）\n3. 店铺处罚相关单据管理权限集（查看，驳回店铺处罚相关单据等能力）\n4. 店铺相关的客服能力权限集 — 主动联系部分（客服模块 — 主动联系，高危权限集）\n5. 店铺与消费者的客服记录信息获取能力（客服模块 — 商家客服会话记录）\n\n店铺客服小组，负责与店铺沟通，\n\n具有的权限集有：\n1. 店铺信息获取权限集\n2. 店铺相关单据查看能力权限集（查看店铺相关的所有单据）\n3. 店铺相关的客服能力权限集 — 被动联系部分 （因为非高危，所以解藕。）\n4. 店铺相关的客服能力权限集 — 主动联系部分\n5. 店铺隐私信息获取权限集\n6. 店铺隐私信息修改权限集 （高危）\n\n\n> 店铺小组并不仅仅具有店铺模块的权限，还拥有部分的业务支撑模块的权限。\n>\n> 即，单据模块，风险模块和客服模块的店铺相关部分。\n>\n\n## 能力\n\n能力是最小的实体，其实本来打算叫接口的，但是不太准确。\n\n例如在单据系统中，我们在实际开发中应该开发一个获取所有单据的接口，而不是开发n个分别获取不同类型的单据的接口。\n\n```js\n// 应该是这种形式\nconst Order = {\n  getOrder(type, orders) { \n    // ...\n  }\n}\n\n// 例如店铺处罚相关的type为10001，店铺审核相关的type为10002。\n\ncall('Order', 'getOrder', { \n  params: {\n    type: 10001,\n  }\n })\n```\n\n> 一个能力可以存在多个权限集"}